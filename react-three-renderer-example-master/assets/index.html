<!doctype html>
<html>
<head>
    <style>
        @font-face {
            font-family: 'inconsolata';
            src: url('files/inconsolata.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        * {
            box-sizing: border-box;
        }

        html {
            height: 100%;
        }

        body {
            background-color: #ffffff;
            margin: 0px;
            height: 100%;
            color: #555;
            font-family: 'inconsolata';
            font-size: 15px;
            line-height: 18px;
            overflow: hidden;
        }

        h1 {
            margin-top: 30px;
            margin-bottom: 40px;
            margin-left: 20px;
            font-size: 25px;
            font-weight: normal;
        }

        h2 {
            font-size: 20px;
            font-weight: normal;
        }

        a {
            color: #2194CE;
            text-decoration: none;
        }

        #panel {
            position: fixed;
            left: 0px;
            width: 310px;
            height: 100%;
            overflow: auto;
            background: #fafafa;
        }

        #panel #content {
            padding: 0px 20px;
        }

        #panel #content .link {
            color: #2194CE;
            display: block;
            text-decoration: none;
            cursor: pointer;
        }

        #panel #content .selected {
            color: #ff0000;
        }

        #panel #content .link:hover {
            text-decoration: underline;
        }

        #viewer {
            position: absolute;
            border: 0px;
            left: 310px;
            width: calc(100% - 310px);
            height: 100%;
            overflow: hidden;
        }

        #button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px;
            color: #fff;
            background-color: #555;
            opacity: 0.7;
        }

        #button:hover {
            cursor: pointer;
            opacity: 1;
        }

        /* mobile */

        #expandButton {
            display: none;
            position: absolute;
            right: 20px;
            top: 12px;
            width: 32px;
            height: 32px;
        }


        #expandButton span {
            height: 2px;
            background-color: #2194CE;
            width: 16px;
            position: absolute;
            left: 8px;
            top: 10px;
        }
        .searchable-container{margin:20px 0 0 0}
        .searchable-container label.btn-default.active{background-color:#007ba7;color:#FFF}
        .searchable-container label.btn-default{width:90%;border:1px solid #efefef;margin:5px; box-shadow:5px 8px 8px 0 #ccc;}
        .searchable-container label .bizcontent{width:100%;}
        .searchable-container .btn-group{width:90%}
        .searchable-container .btn span.glyphicon{
            opacity: 0;
        }
        .searchable-container .btn.active span.glyphicon {
            opacity: 1;
        }


        #expandButton span:nth-child(1) {
            top: 16px;
        }

        #expandButton span:nth-child(2) {
            top: 22px;
        }

        @media all and ( max-width: 640px ) {
            h1 {
                margin-top: 20px;
                margin-bottom: 20px;
            }

            #panel {
                position: absolute;
                left: 0;
                top: 0;
                height: 480px;
                width: 100%;
                right: 0;
                z-index: 100;
                overflow: hidden;
                border-bottom: 1px solid #dedede;
            }

            #content {
                position: absolute;
                left: 0;
                top: 60px;
                right: 0;
                bottom: 0;
                font-size: 17px;
                line-height: 22px;
                overflow: auto;
            }

            #viewer {
                position: absolute;
                left: 0;
                top: 56px;
                width: 100%;
                height: calc(100% - 56px);
                overflow: hidden,
            }

            #expandButton {
                display: block;
            }

            #panel.collapsed {
                height: 56px;
            }
        }
    </style>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
          crossorigin="anonymous">
</head>
<body>
<div id="content"></div>
</body>
<script type="text/javascript" charset="utf-8" src="js/bundle-commons.js"></script>
<script type="text/javascript" charset="utf-8" src="js/bundle-app.js"></script>
<script type="text/javascript">
    var sc_project = 10775601;
    var sc_invisible = 1;
    var sc_security = "74e09d45";
    var sc_https = 1;
    var sc_remove_link = 1;
    var scJsHost = (("https:" == document.location.protocol) ?
            "https://secure." : "http://www.");
    document.write("<sc" + "ript type='text/javascript' src='" +
            scJsHost +
            "statcounter.com/counter/counter.js'></" + "script>");
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        crossorigin="anonymous"></script>

<script src="https://threejs.org/build/three.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
<script src="https://s3-eu-west-2.amazonaws.com/bckld/lab/loading.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        crossorigin="anonymous"></script>

<script>


    var callfun=function()
    {




        controls.autoRotate=true;
        controls.autoRotateSpeed = -15.0;
        setTimeout(function(){controls.autoRotate=false;

            scene.children[2].children.length=1;
            scene.children[2].createMarker(48.856700, 2.350800);

        }, ((48.856700+90)/360* 3000));



        //controls.rotateByAxis('y',30)
        // camera.position.x = (Math.sin( t/1000) * 300 );
        //camera.position.y = 230;
        //camera.position.z = (Math.cos( t/1000) * 300);


    };
    $(function() {
        $('#firstbutton').click(function() {
            scene.children[2].children.length=1;
            scene.children[2].createMarker(48.856700, 2.350800);



            controls.autoRotate=true;
            controls.autoRotateSpeed = -15.0;
            setTimeout(function(){controls.autoRotate=false; }, ((48.856700+90)/360* 3000));
        });
    });
    // ------ Marker object ------------------------------------------------

    function Marker() {
        THREE.Object3D.call(this);

        var radius = 0.005;
        var sphereRadius = 0.08;
        var height = 0.05;



        var texLoader = new THREE.TextureLoader();

        var texture = texLoader.load('http://d33wubrfki0l68.cloudfront.net/ro/people/ryan-cook/assets/profile/8a438bd33214a9ff66737637419049286fb43959/circular-photo.png');


        var material = new THREE.MeshPhongMaterial({ map:texture ,autoRotate:true });
        var material2 = new THREE.MeshPhongMaterial({ color: 'red' });

        var cone = new THREE.Mesh(new THREE.ConeBufferGeometry(radius, height, 8, 1, true), material2);
        cone.position.y = height * 0.5;
        cone.rotation.x = Math.PI;

        var sphere = new THREE.Mesh(new THREE.SphereBufferGeometry(sphereRadius, 16), material);
        sphere.position.y = height * 0.95 + (sphereRadius);
       // sphere.autoRotate=true;

        this.add(cone, sphere);
       // this.autoRotate=true;
    }

    Marker.prototype = Object.create(THREE.Object3D.prototype);

    // ------ Earth object -------------------------------------------------

    function Earth(radius, texture) {
        THREE.Object3D.call(this);

        this.userData.radius = radius;

        var earth = new THREE.Mesh(
            new THREE.SphereBufferGeometry(radius, 64.0, 48.0),
            new THREE.MeshPhongMaterial({
                map: texture
            })
        );

        this.add(earth);
    }

    Earth.prototype = Object.create(THREE.Object3D.prototype);

    Earth.prototype.createMarker = function (lat, lon) {
        var marker = new Marker();



        var latRad = lat * (Math.PI / 180);
        var lonRad = -lon * (Math.PI / 180);
        var r = this.userData.radius;

        marker.position.set(Math.cos(latRad) * Math.cos(lonRad) * r, Math.sin(latRad) * r, Math.cos(latRad) * Math.sin(lonRad) * r);
        marker.rotation.set(0.0, -lonRad, latRad - Math.PI * 0.5);

        this.add(marker);
    };

    // ------ Three.js code ------------------------------------------------

    var scene, camera, renderer;
    var controls;

    init();

    function init() {



        //   OrbitControls


        scene = new THREE.Scene();





        camera = new THREE.PerspectiveCamera(45, 4 / 3, 0.1, 100);
        camera.position.set(0.0, 1.5, 3.0);

        renderer = new THREE.WebGLRenderer({ antialias: true });

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.autoRotate = false;
        controls.autoRotateSpeed = -1.0;
        controls.enablePan = false;

        var ambient = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambient);

        var direcitonal = new THREE.DirectionalLight(0xffffff, 0.5);
        direcitonal.position.set(5.0, 2.0, 5.0).normalize();
        scene.add(direcitonal);




        // just some code for the loading
        var manager = createLoader(renderer.domElement, animate);

        var texLoader = new THREE.TextureLoader(manager).setCrossOrigin(true);

        var texture = texLoader.load('https://s3-eu-west-2.amazonaws.com/bckld/lab/textures/earth_latlon.jpg');
        texture.anisotropy = renderer.capabilities.getMaxAnisotropy();

        var earth = new Earth(1.0, texture);




        scene.add(earth);

        window.addEventListener('resize', onResize);
        onResize();



        document.getElementById('earth').appendChild(renderer.domElement);



    }

    function onResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
        requestAnimationFrame(animate);

        controls.update();

        renderer.render(scene, camera);
    }

</script>
<noscript>
    <div class="statcounter"><img class="statcounter"
                                  src="http://c.statcounter.com/10775601/0/74e09d45/1/"
                                  alt="stats"></div>
</noscript>
</html>
